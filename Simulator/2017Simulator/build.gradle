
plugins {
    id 'java'
    id 'edu.wpi.first.wpilib.versioning.WPILibVersioningPlugin' version '1.5.1'
    id 'com.github.johnrengelman.shadow' version '1.2.3'
    id 'application'
}


repositories {
    mavenCentral()

    maven {
        url "http://raw.githubusercontent.com/pjreiniger/maven_repo/master/"
    }
}

sourceSets {
    awSnobotSim
    {
        java
        {
            srcDirs = ["${rootDir}/src", "${rootDir}/../../RobotCode/snobot2017/src", "${rootDir}/../../RobotCode/SnobotRobotLibs/src"]
        }
    }
}

dependencies {

    // WPI Stuff
    awSnobotSimCompile 'edu.wpi.first.wpilib.networktables.java:NetworkTables:+:desktop'
    awSnobotSimCompile 'edu.wpi.first.wpilibj:athena:+'
    
    // 3rd Party
    awSnobotSimCompile 'com.googlecode.json-simple:json-simple:1.1.1'
    awSnobotSimCompile files("../2017MockWpi/3rdParyLibraries/RIOdroid.jar")
    awSnobotSimCompile files(System.getProperty("user.home") + "/wpilib/user/java/lib/CTRLib.jar")

    // Snobot Sim Stuff
    awSnobotSimCompile files("../2017MockWpi/build/libs/SnobotSimulator.jar")
    awSnobotSimCompile files("../2017MockWpi/templibs/snobotSim.jar")
    awSnobotSimCompile files("../../2017MockWpi/templibs/snobotSim.jar")
    awSnobotSimCompile files("../../2017MockWpi/templibs/snobotSim.jar")
    
    
    shadow 'edu.wpi.first.wpilib.networktables.java:NetworkTables:+:desktop'
    shadow 'edu.wpi.first.wpilibj:athena:+'
}

jar {
    dependsOn { classes }

    from sourceSets.awSnobotSim.output
}

task testJar(type: ShadowJar) {
  classifier = 'tests'
  from sourceSets.awSnobotSim.output
  configurations = [project.configurations.testRuntime]
}

mainClassName = "com.snobot.simulator.Main"
